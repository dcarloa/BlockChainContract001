================================================================================
                    GU√çA DETALLADA - TRAVELFUND DAPP
          Comprende la Soluci√≥n Completa Paso a Paso
================================================================================

TABLA DE CONTENIDOS
-------------------
1. Introducci√≥n al Proyecto
2. Tecnolog√≠as y Librer√≠as Utilizadas
3. Arquitectura de la Soluci√≥n
4. El Smart Contract: TravelFund.sol
5. Blockchain de Pruebas (Hardhat Network)
6. Conexi√≥n con MetaMask
7. Frontend y Comunicaci√≥n Web3
8. Flujo Completo de Uso
9. Ejemplos Pr√°cticos
10. Soluci√≥n de Problemas Comunes

================================================================================
1. INTRODUCCI√ìN AL PROYECTO
================================================================================

TravelFund es una aplicaci√≥n descentralizada (DApp) que permite a un grupo de
amigos crear un fondo compartido para un viaje, donde:

- Cada persona deposita dinero (ETH - Ethereum)
- Cualquiera puede proponer gastos (hotel, vuelos, tours)
- El grupo vota democr√°ticamente si aprobar cada gasto
- Los fondos se liberan autom√°ticamente cuando hay suficientes votos
- Todo es transparente e inmutable en la blockchain

ANALOG√çA SIMPLE:
Imagina una alcanc√≠a digital compartida donde TODOS deben estar de acuerdo
antes de romperla para sacar dinero. Pero en lugar de romperla, el smart
contract act√∫a como un "tesorero autom√°tico" que sigue reglas programadas.

================================================================================
2. TECNOLOG√çAS Y LIBRER√çAS UTILIZADAS
================================================================================

2.1 NODE.JS Y NPM
-----------------
Node.js: Entorno de ejecuci√≥n de JavaScript fuera del navegador
NPM: Gestor de paquetes (instalador de librer√≠as)

¬øPor qu√© lo necesitamos?
- Para instalar y ejecutar Hardhat
- Para correr el servidor web del frontend
- Para ejecutar scripts de despliegue

Ejemplo de uso:
    npm install              ‚Üí Instala todas las dependencias
    node scripts/deploy.js   ‚Üí Ejecuta un script de JavaScript


2.2 HARDHAT (v2.27.0)
---------------------
Framework de desarrollo para Ethereum. Es como un "laboratorio completo" para
crear, probar y desplegar smart contracts.

Componentes principales:
- Compilador de Solidity (convierte .sol a bytecode)
- Red local de pruebas (blockchain simulada)
- Consola interactiva para probar contratos
- Framework de testing

Comandos importantes:
    npx hardhat compile      ‚Üí Compila contratos
    npx hardhat test         ‚Üí Ejecuta pruebas
    npx hardhat node         ‚Üí Inicia blockchain local
    npx hardhat console      ‚Üí Abre consola interactiva

Estructura de archivos:
    hardhat.config.js        ‚Üí Configuraci√≥n de Hardhat
    contracts/               ‚Üí Smart contracts (.sol)
    test/                    ‚Üí Pruebas automatizadas
    scripts/                 ‚Üí Scripts de despliegue


2.3 SOLIDITY (v0.8.27)
----------------------
Lenguaje de programaci√≥n para smart contracts en Ethereum.
Similar a JavaScript pero con tipos est√°ticos (como TypeScript).

Caracter√≠sticas clave:
- Fuertemente tipado (uint256, address, bool, string, etc.)
- Orientado a objetos (contratos = clases)
- Funciones modificadoras (public, private, view, payable)
- Eventos para notificaciones
- Modificadores personalizados para validaciones

Ejemplo b√°sico:
    contract MiContrato {
        uint256 public numero;              // Variable de estado
        
        function setNumero(uint256 _n) public {
            numero = _n;                    // Modifica el estado
        }
        
        function getNumero() public view returns (uint256) {
            return numero;                  // Solo lectura
        }
    }


2.4 ETHERS.JS (v6.15.0)
-----------------------
Librer√≠a JavaScript para interactuar con Ethereum desde el navegador.
Es el "traductor" entre tu aplicaci√≥n web y la blockchain.

Componentes principales:

a) Provider: Conexi√≥n con la blockchain
   Ejemplo:
       const provider = new ethers.BrowserProvider(window.ethereum);
       // Se conecta al nodo a trav√©s de MetaMask

b) Signer: Representa una cuenta que puede firmar transacciones
   Ejemplo:
       const signer = await provider.getSigner();
       const address = await signer.getAddress();
       // Obtiene la direcci√≥n de la cuenta conectada

c) Contract: Interfaz para interactuar con smart contracts
   Ejemplo:
       const contract = new ethers.Contract(
           contractAddress,  // Direcci√≥n del contrato
           contractABI,      // Interfaz (qu√© funciones tiene)
           signer           // Qui√©n firma las transacciones
       );

d) Formateo de unidades
   Ejemplo:
       ethers.parseEther("1.5")      // "1.5" ‚Üí 1500000000000000000 wei
       ethers.formatEther(balance)   // 1500000000000000000 ‚Üí "1.5" ETH


2.5 EXPRESS.JS (v4.18.2)
------------------------
Framework web para Node.js. Sirve los archivos del frontend (HTML, CSS, JS).

¬øPor qu√© no abrir index.html directamente?
- Los navegadores bloquean CORS (Cross-Origin Resource Sharing)
- Necesitamos servir archivos desde un servidor HTTP
- Permite agregar middleware y headers de seguridad

Configuraci√≥n b√°sica:
    const express = require('express');
    const app = express();
    
    // Servir archivos est√°ticos
    app.use(express.static('frontend'));
    
    // Endpoint para obtener direcci√≥n del contrato
    app.get('/contract-address.json', (req, res) => {
        res.json({ address: "0x123..." });
    });
    
    app.listen(3001, () => {
        console.log('Servidor en http://localhost:3001');
    });


2.6 OTRAS DEPENDENCIAS
----------------------

@nomicfoundation/hardhat-toolbox:
    Paquete todo-en-uno que incluye herramientas esenciales para Hardhat.

chai (v4.x):
    Librer√≠a de aserciones para testing.
    Ejemplo:
        expect(balance).to.equal(expectedValue);
        expect(await contract.isActive()).to.be.true;

mocha:
    Framework de testing (viene con Hardhat).
    Organiza tests en describe() e it() blocks.

================================================================================
3. ARQUITECTURA DE LA SOLUCI√ìN
================================================================================

La soluci√≥n tiene 3 capas principales:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        FRONTEND (Capa 1)                        ‚îÇ
‚îÇ  HTML + CSS + JavaScript                                        ‚îÇ
‚îÇ  - Interfaz visual para el usuario                              ‚îÇ
‚îÇ  - Formularios para depositar, proponer, votar                  ‚îÇ
‚îÇ  - Muestra informaci√≥n del contrato                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ ethers.js
                       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      METAMASK (Capa 2)                          ‚îÇ
‚îÇ  Wallet del navegador                                           ‚îÇ
‚îÇ  - Gestiona cuentas y claves privadas                           ‚îÇ
‚îÇ  - Firma transacciones                                          ‚îÇ
‚îÇ  - Conecta con la red blockchain                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚îÇ JSON-RPC
                       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   BLOCKCHAIN (Capa 3)                           ‚îÇ
‚îÇ  Hardhat Network (localhost:8545)                               ‚îÇ
‚îÇ  - Ejecuta el smart contract                                    ‚îÇ
‚îÇ  - Almacena el estado (balances, propuestas, votos)             ‚îÇ
‚îÇ  - Procesa transacciones                                        ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇ  SMART CONTRACT: TravelFund.sol              ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - L√≥gica de negocio                          ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - Reglas de votaci√≥n                         ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - Gesti√≥n de fondos                          ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

FLUJO DE UNA TRANSACCI√ìN:
1. Usuario hace click en "Depositar 2 ETH" (Frontend)
2. Frontend llama a contract.deposit({value: parseEther("2")})
3. MetaMask muestra popup para confirmar
4. Usuario confirma y MetaMask firma la transacci√≥n
5. Transacci√≥n se env√≠a a Hardhat Network
6. Smart contract ejecuta la funci√≥n deposit()
7. Estado se actualiza en la blockchain
8. Frontend recibe confirmaci√≥n y actualiza la UI

================================================================================
4. EL SMART CONTRACT: TRAVELFUND.SOL
================================================================================

4.1 ESTRUCTURA DEL CONTRATO
----------------------------

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

contract TravelFund {
    // 1. VARIABLES DE ESTADO (almacenadas en blockchain)
    // 2. STRUCTS (estructuras de datos personalizadas)
    // 3. MAPPINGS (diccionarios/hashmaps)
    // 4. EVENTOS (notificaciones)
    // 5. MODIFICADORES (validaciones reutilizables)
    // 6. CONSTRUCTOR (inicializaci√≥n)
    // 7. FUNCIONES
}


4.2 VARIABLES DE ESTADO PRINCIPALES
------------------------------------

string public tripName;                    // Nombre del viaje
address public creator;                    // Quien cre√≥ el fondo
bool public isActive;                      // ¬øEl fondo est√° activo?
uint256 public totalBalance;               // Balance total (en wei)
uint256 public approvalPercentage;         // % necesario para aprobar
uint256 public minimumVotes;               // Votos m√≠nimos requeridos
uint256 public proposalCount;              // Contador de propuestas

EJEMPLO:
Si approvalPercentage = 60 y hay 5 contribuyentes:
- Se necesitan 3 votos para aprobar (60% de 5 = 3)
- Pero si minimumVotes = 2, al menos deben votar 2 personas


4.3 STRUCTS: ESTRUCTURAS DE DATOS
----------------------------------

struct Contributor {
    uint256 totalContribution;    // Total depositado
    bool exists;                  // ¬øExiste este contribuyente?
}

struct Proposal {
    uint256 id;                   // ID √∫nico
    string description;           // Descripci√≥n del gasto
    uint256 amount;               // Monto solicitado
    address payable recipient;    // Quien recibir√° el dinero
    uint256 votesFor;             // Votos a favor
    uint256 votesAgainst;         // Votos en contra
    bool executed;                // ¬øYa se ejecut√≥?
    address proposer;             // Quien propuso
    uint256 timestamp;            // Cu√°ndo se cre√≥
}

EJEMPLO DE USO:
    Proposal memory nuevaPropuesta = Proposal({
        id: 1,
        description: "Hotel en Canc√∫n - 3 noches",
        amount: 4 ether,
        recipient: payable(0x70997970...),
        votesFor: 0,
        votesAgainst: 0,
        executed: false,
        proposer: msg.sender,
        timestamp: block.timestamp
    });


4.4 MAPPINGS: DICCIONARIOS EN SOLIDITY
---------------------------------------

mapping(address => Contributor) public contributors;
// Ejemplo: contributors[0x123...] ‚Üí {totalContribution: 5 ether, exists: true}

mapping(uint256 => Proposal) public proposals;
// Ejemplo: proposals[1] ‚Üí {id: 1, description: "Hotel", amount: 4 ether, ...}

mapping(uint256 => mapping(address => bool)) public hasVoted;
// Ejemplo: hasVoted[1][0x123...] ‚Üí true (ya vot√≥ en propuesta #1)

address[] public contributorsList;
// Lista de todas las direcciones que contribuyeron


4.5 EVENTOS: NOTIFICACIONES EN BLOCKCHAIN
------------------------------------------

event FundCreated(string tripName, address creator, uint256 timestamp);
event Deposit(address indexed contributor, uint256 amount);
event ProposalCreated(uint256 indexed proposalId, string description);
event Voted(uint256 indexed proposalId, address voter, bool inFavor);
event ProposalExecuted(uint256 indexed proposalId, uint256 amount);

¬øPor qu√© usar eventos?
- Son baratos (menos gas que almacenar datos)
- Frontend puede escucharlos en tiempo real
- Crean un historial inmutable de acciones

EJEMPLO EN FRONTEND:
    contract.on("Deposit", (contributor, amount) => {
        console.log(`${contributor} deposit√≥ ${amount} ETH`);
        actualizarInterfaz();
    });


4.6 MODIFICADORES: VALIDACIONES REUTILIZABLES
----------------------------------------------

modifier onlyCreator() {
    require(msg.sender == creator, "Solo el creador");
    _;  // Aqu√≠ se ejecuta la funci√≥n
}

modifier onlyActive() {
    require(isActive, "Fondo cerrado");
    _;
}

modifier onlyContributor() {
    require(contributors[msg.sender].exists, "No eres contribuyente");
    _;
}

USO:
    function closeFund() public onlyCreator onlyActive {
        isActive = false;
        // Solo se ejecuta si pasan ambas validaciones
    }


4.7 FUNCIONES PRINCIPALES
--------------------------

A) DEPOSIT - Depositar Fondos
    function deposit() public payable onlyActive {
        require(msg.value > 0, "Debes enviar ETH");
        
        if (!contributors[msg.sender].exists) {
            contributors[msg.sender] = Contributor(msg.value, true);
            contributorsList.push(msg.sender);
        } else {
            contributors[msg.sender].totalContribution += msg.value;
        }
        
        totalBalance += msg.value;
        emit Deposit(msg.sender, msg.value);
    }

EXPLICACI√ìN:
- payable: Permite recibir ETH
- msg.value: Cantidad de ETH enviada (en wei)
- msg.sender: Direcci√≥n de quien llama la funci√≥n
- Actualiza el mapping contributors
- Agrega a la lista si es nuevo
- Emite evento Deposit

EJEMPLO DE LLAMADA DESDE FRONTEND:
    await contract.deposit({ value: ethers.parseEther("2.5") });
    // Deposita 2.5 ETH


B) CREATE PROPOSAL - Crear Propuesta
    function createProposal(
        string memory _description,
        uint256 _amount,
        address payable _recipient
    ) public onlyActive onlyContributor returns (uint256) {
        require(_amount <= totalBalance, "Monto excede balance");
        require(_recipient != address(0), "Destinatario inv√°lido");
        
        proposalCount++;
        proposals[proposalCount] = Proposal({
            id: proposalCount,
            description: _description,
            amount: _amount,
            recipient: _recipient,
            votesFor: 0,
            votesAgainst: 0,
            executed: false,
            proposer: msg.sender,
            timestamp: block.timestamp
        });
        
        emit ProposalCreated(proposalCount, _description);
        return proposalCount;
    }

EXPLICACI√ìN:
- memory: La variable vive solo durante la ejecuci√≥n
- returns (uint256): Devuelve el ID de la propuesta
- block.timestamp: Marca de tiempo del bloque actual

EJEMPLO:
    const proposalId = await contract.createProposal(
        "Hotel en Canc√∫n - 3 noches",
        ethers.parseEther("4"),
        "0x70997970C51812dc3A010C7d01b50e0d17dc79C8"
    );


C) VOTE - Votar en una Propuesta
    function vote(uint256 _proposalId, bool _inFavor) 
        public 
        onlyActive 
        onlyContributor 
    {
        require(_proposalId > 0 && _proposalId <= proposalCount);
        require(!proposals[_proposalId].executed, "Ya ejecutada");
        require(!hasVoted[_proposalId][msg.sender], "Ya votaste");
        
        hasVoted[_proposalId][msg.sender] = true;
        
        if (_inFavor) {
            proposals[_proposalId].votesFor++;
        } else {
            proposals[_proposalId].votesAgainst++;
        }
        
        emit Voted(_proposalId, msg.sender, _inFavor);
    }

L√ìGICA DE VOTACI√ìN:
1. Verifica que la propuesta existe
2. Verifica que no se haya ejecutado
3. Verifica que no hayas votado antes
4. Registra tu voto
5. Incrementa contador (a favor o en contra)

EJEMPLO:
    await contract.vote(1, true);   // Voto a favor en propuesta #1
    await contract.vote(1, false);  // Voto en contra


D) EXECUTE PROPOSAL - Ejecutar Propuesta Aprobada
    function executeProposal(uint256 _proposalId) public onlyActive {
        Proposal storage proposal = proposals[_proposalId];
        
        require(!proposal.executed, "Ya ejecutada");
        require(proposal.amount <= totalBalance, "Fondos insuficientes");
        
        uint256 totalVotes = proposal.votesFor + proposal.votesAgainst;
        require(totalVotes >= minimumVotes, "Votos insuficientes");
        
        uint256 requiredVotes = (contributorsList.length * approvalPercentage) / 100;
        require(proposal.votesFor >= requiredVotes, "No aprobada");
        
        proposal.executed = true;
        totalBalance -= proposal.amount;
        
        (bool success, ) = proposal.recipient.call{value: proposal.amount}("");
        require(success, "Transferencia fallida");
        
        emit ProposalExecuted(_proposalId, proposal.amount);
    }

VALIDACIONES:
1. No ejecutada previamente
2. Hay suficiente balance
3. Se alcanz√≥ el m√≠nimo de votos
4. Se alcanz√≥ el porcentaje requerido
5. Transferencia exitosa

C√ÅLCULO DE APROBACI√ìN:
Si hay 5 contribuyentes y approvalPercentage = 60:
    requiredVotes = (5 * 60) / 100 = 3
    Se necesitan al menos 3 votos a favor


E) CLOSE FUND - Cerrar el Fondo
    function closeFund() public onlyCreator onlyActive {
        isActive = false;
        emit FundClosed(totalBalance, block.timestamp);
    }

Despu√©s de cerrar:
- No se pueden hacer m√°s dep√≥sitos
- No se pueden crear propuestas
- Los contribuyentes pueden retirar su parte


F) WITHDRAW PROPORTIONAL - Retirar Fondos Proporcionales
    function withdrawProportional() public {
        require(!isActive, "Fondo a√∫n activo");
        require(contributors[msg.sender].exists, "No contribuyente");
        
        uint256 contribution = contributors[msg.sender].totalContribution;
        require(contribution > 0, "Sin contribuci√≥n");
        
        // C√°lculo proporcional
        uint256 share = (totalBalance * contribution) / getTotalContributed();
        
        require(share > 0, "Sin fondos");
        
        contributors[msg.sender].totalContribution = 0;
        totalBalance -= share;
        
        (bool success, ) = payable(msg.sender).call{value: share}("");
        require(success, "Transferencia fallida");
        
        emit Withdrawal(msg.sender, share);
    }

EJEMPLO DE C√ÅLCULO:
    Total contribuido por todos: 10 ETH
    Tu contribuci√≥n: 3 ETH
    Balance actual del fondo: 6 ETH (despu√©s de gastos)
    
    Tu parte = (6 ETH * 3 ETH) / 10 ETH = 1.8 ETH

================================================================================
5. BLOCKCHAIN DE PRUEBAS (HARDHAT NETWORK)
================================================================================

5.1 ¬øQU√â ES HARDHAT NETWORK?
-----------------------------
Es una blockchain de Ethereum simulada que corre en tu computadora.
Perfecta para desarrollo porque:

- No cuesta dinero real
- Las transacciones son instant√°neas
- Puedes reiniciarla cuando quieras
- Viene con 20 cuentas precargadas con 10,000 ETH cada una

ANALOG√çA:
Es como un "sandbox" de videojuego donde puedes experimentar sin
consecuencias reales.


5.2 CONFIGURACI√ìN
-----------------
Archivo: hardhat.config.js

module.exports = {
    solidity: "0.8.27",
    networks: {
        hardhat: {
            chainId: 31337  // ID de la red local
        },
        localhost: {
            url: "http://127.0.0.1:8545"  // Puerto del nodo
        }
    }
};


5.3 INICIAR EL NODO
-------------------
Comando:
    npx hardhat node

Esto inicia un nodo local que:
- Escucha en puerto 8545
- Muestra logs de cada transacci√≥n
- Persiste el estado mientras est√° corriendo

Salida t√≠pica:
    Started HTTP and WebSocket JSON-RPC server at http://127.0.0.1:8545/
    
    Accounts
    ========
    Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH)
    Private Key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
    ...


5.4 CUENTAS DE PRUEBA
---------------------
Hardhat genera 20 cuentas autom√°ticamente:

Account #0 (Deployer):
    Address: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
    Key: 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

Account #1:
    Address: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
    Key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d

... (18 cuentas m√°s)

IMPORTAR EN METAMASK:
1. Abre MetaMask
2. Click en el √≠cono de cuenta
3. "Importar cuenta"
4. Pega la clave privada
5. ¬°Listo! Ver√°s 10,000 ETH


5.5 INTERACCI√ìN CON LA CONSOLA
-------------------------------
Comando:
    npx hardhat console --network localhost

Ejemplos:
    // Obtener cuentas
    const [owner, addr1, addr2] = await ethers.getSigners();
    
    // Conectar con el contrato
    const TravelFund = await ethers.getContractFactory("TravelFund");
    const fund = await TravelFund.attach("0x5FbDB2...");
    
    // Llamar funciones
    await fund.deposit({ value: ethers.parseEther("2") });
    const balance = await fund.getBalance();
    console.log(ethers.formatEther(balance));  // "2.0"

================================================================================
6. CONEXI√ìN CON METAMASK
================================================================================

6.1 ¬øQU√â ES METAMASK?
----------------------
Wallet (billetera) de Ethereum en forma de extensi√≥n de navegador.
Funciona como:
- Gestor de cuentas y claves privadas
- Firmador de transacciones
- Puente entre tu DApp y la blockchain

INSTALACI√ìN:
1. Ve a https://metamask.io/download/
2. Instala la extensi√≥n en Chrome/Firefox/Brave
3. Crea una wallet o importa una existente
4. ¬°Listo!


6.2 CONFIGURAR RED LOCAL
-------------------------
Para conectar MetaMask con Hardhat Network:

1. Abre MetaMask
2. Click en el selector de red (arriba)
3. "Agregar red" ‚Üí "Agregar red manualmente"
4. Completa:
   - Nombre de red: Hardhat Local
   - Nueva URL de RPC: http://127.0.0.1:8545
   - ID de cadena: 31337
   - S√≠mbolo de moneda: ETH
5. Guardar

Ahora ver√°s "Hardhat Local" en el selector de redes.


6.3 FLUJO DE CONEXI√ìN DESDE EL FRONTEND
----------------------------------------

// 1. Detectar MetaMask
if (!window.ethereum) {
    alert("Por favor instala MetaMask");
    return;
}

// 2. Solicitar conexi√≥n
const accounts = await window.ethereum.request({ 
    method: 'eth_requestAccounts' 
});
// MetaMask muestra popup: "Conectar cuenta"

// 3. Obtener provider y signer
const provider = new ethers.BrowserProvider(window.ethereum);
const signer = await provider.getSigner();
const address = await signer.getAddress();

console.log("Conectado:", address);

// 4. Verificar red
const network = await provider.getNetwork();
if (network.chainId !== 31337n) {
    alert("Por favor cambia a Hardhat Local");
    return;
}


6.4 MANEJO DE M√öLTIPLES WALLETS
--------------------------------
A veces tienes MetaMask + Coinbase Wallet + otros instalados.
Para detectar solo MetaMask:

if (window.ethereum) {
    let providers = window.ethereum.providers || [window.ethereum];
    
    // Filtrar solo MetaMask
    const metamask = providers.find(
        p => p.isMetaMask && !p.isCoinbaseWallet
    );
    
    if (!metamask) {
        alert("MetaMask no detectado");
        return;
    }
    
    // Usar este provider
    const provider = new ethers.BrowserProvider(metamask);
}


6.5 EVENTOS DE METAMASK
------------------------

// Detectar cambio de cuenta
window.ethereum.on('accountsChanged', (accounts) => {
    console.log("Cuenta cambiada:", accounts[0]);
    location.reload();  // Recargar la p√°gina
});

// Detectar cambio de red
window.ethereum.on('chainChanged', (chainId) => {
    console.log("Red cambiada:", chainId);
    location.reload();
});

// Detectar desconexi√≥n
window.ethereum.on('disconnect', () => {
    console.log("MetaMask desconectado");
});

================================================================================
7. FRONTEND Y COMUNICACI√ìN WEB3
================================================================================

7.1 ESTRUCTURA DEL FRONTEND
----------------------------
frontend/
‚îú‚îÄ‚îÄ index.html          ‚Üí Estructura HTML
‚îú‚îÄ‚îÄ styles.css          ‚Üí Estilos visuales
‚îú‚îÄ‚îÄ app.js              ‚Üí L√≥gica JavaScript + Web3
‚îú‚îÄ‚îÄ ethers.umd.min.js   ‚Üí Librer√≠a ethers.js
‚îî‚îÄ‚îÄ contract-address.json ‚Üí Direcci√≥n del contrato desplegado


7.2 INICIALIZACI√ìN DE LA DAPP
------------------------------

// Variables globales
let provider;
let signer;
let contract;
let userAddress;

// ABI del contrato (definici√≥n de funciones)
const contractABI = [
    "function deposit() payable",
    "function createProposal(string,uint256,address) returns (uint256)",
    "function vote(uint256,bool)",
    // ... m√°s funciones
];

// Funci√≥n de inicializaci√≥n
async function init() {
    // 1. Conectar wallet
    await connectWallet();
    
    // 2. Cargar contrato
    await loadContract();
    
    // 3. Actualizar interfaz
    await updateUI();
}


7.3 CONECTAR CON EL CONTRATO
-----------------------------

async function loadContract() {
    // Obtener direcci√≥n del contrato
    const response = await fetch('/contract-address.json');
    const data = await response.json();
    const contractAddress = data.address;
    
    // Crear instancia del contrato
    contract = new ethers.Contract(
        contractAddress,
        contractABI,
        signer  // Para transacciones que modifican estado
    );
    
    console.log("Contrato cargado:", contractAddress);
}


7.4 REALIZAR TRANSACCIONES
---------------------------

A) DEPOSITAR FONDOS
async function depositFunds() {
    try {
        const amount = document.getElementById('depositAmount').value;
        
        // Mostrar loading
        showLoading("Procesando dep√≥sito...");
        
        // Enviar transacci√≥n
        const tx = await contract.deposit({
            value: ethers.parseEther(amount)
        });
        
        // Esperar confirmaci√≥n
        await tx.wait();
        
        showToast("¬°Dep√≥sito exitoso!", "success");
        await updateUI();
        
    } catch (error) {
        console.error(error);
        showToast("Error: " + error.message, "error");
    } finally {
        hideLoading();
    }
}

B) CREAR PROPUESTA
async function createProposal() {
    const description = document.getElementById('proposalDesc').value;
    const amount = document.getElementById('proposalAmount').value;
    const recipient = document.getElementById('proposalRecipient').value;
    
    try {
        showLoading("Creando propuesta...");
        
        const tx = await contract.createProposal(
            description,
            ethers.parseEther(amount),
            recipient
        );
        
        const receipt = await tx.wait();
        
        // Extraer ID de la propuesta del evento
        const event = receipt.logs.find(
            log => log.eventName === 'ProposalCreated'
        );
        const proposalId = event.args[0];
        
        showToast(`Propuesta #${proposalId} creada!`, "success");
        await loadProposals();
        
    } catch (error) {
        showToast("Error: " + error.message, "error");
    } finally {
        hideLoading();
    }
}

C) VOTAR
async function voteProposal(proposalId, inFavor) {
    try {
        showLoading("Registrando voto...");
        
        const tx = await contract.vote(proposalId, inFavor);
        await tx.wait();
        
        showToast("¬°Voto registrado!", "success");
        await loadProposals();
        
    } catch (error) {
        showToast("Error: " + error.message, "error");
    } finally {
        hideLoading();
    }
}


7.5 LEER INFORMACI√ìN DEL CONTRATO
----------------------------------

async function updateUI() {
    // Obtener informaci√≥n b√°sica
    const tripName = await contract.tripName();
    const totalBalance = await contract.getBalance();
    const contributorCount = await contract.getContributorCount();
    const approvalPercentage = await contract.approvalPercentage();
    const isActive = await contract.isActive();
    
    // Actualizar HTML
    document.getElementById('tripName').textContent = tripName;
    document.getElementById('totalBalance').textContent = 
        ethers.formatEther(totalBalance);
    document.getElementById('contributorCount').textContent = contributorCount;
    document.getElementById('approvalPercentage').textContent = 
        approvalPercentage.toString();
    document.getElementById('fundActive').textContent = 
        isActive ? 'Activo' : 'Cerrado';
}


7.6 CARGAR PROPUESTAS
----------------------

async function loadProposals() {
    const proposalCount = await contract.proposalCount();
    const proposalsContainer = document.getElementById('proposalsList');
    proposalsContainer.innerHTML = '';
    
    for (let i = 1; i <= proposalCount; i++) {
        // Obtener datos de la propuesta
        const proposal = await contract.getProposal(i);
        
        // Convertir BigInt a Number
        const votesFor = Number(proposal.votesFor);
        const votesAgainst = Number(proposal.votesAgainst);
        const amount = ethers.formatEther(proposal.amount);
        
        // Crear card HTML
        const card = createProposalCard({
            id: i,
            description: proposal.description,
            amount: amount,
            recipient: proposal.recipient,
            votesFor: votesFor,
            votesAgainst: votesAgainst,
            executed: proposal.executed
        });
        
        proposalsContainer.appendChild(card);
    }
}


7.7 MANEJO DE ERRORES COMUNES
------------------------------

try {
    await contract.deposit({ value: ethers.parseEther("2") });
} catch (error) {
    if (error.code === 'ACTION_REJECTED') {
        // Usuario rechaz√≥ la transacci√≥n
        showToast("Transacci√≥n cancelada", "info");
    } else if (error.code === 'INSUFFICIENT_FUNDS') {
        // No tiene suficiente ETH
        showToast("Fondos insuficientes", "error");
    } else if (error.message.includes("Fondo cerrado")) {
        // Error del smart contract
        showToast("El fondo est√° cerrado", "error");
    } else {
        // Error desconocido
        showToast("Error: " + error.message, "error");
    }
}

================================================================================
8. FLUJO COMPLETO DE USO
================================================================================

PASO 1: CONFIGURACI√ìN INICIAL
------------------------------
1. Instalar dependencias:
   npm install

2. Iniciar nodo Hardhat:
   npx hardhat node
   (Dejar corriendo en una terminal)

3. Desplegar contrato:
   npx hardhat run scripts/deployTravelFund.js --network localhost

4. Iniciar servidor frontend:
   npm run frontend

5. Configurar MetaMask:
   - Agregar red Hardhat Local (127.0.0.1:8545, Chain ID: 31337)
   - Importar cuenta de prueba


PASO 2: CONECTAR WALLET
------------------------
1. Abrir http://localhost:3001
2. Click en "Connect Wallet"
3. MetaMask muestra popup
4. Seleccionar cuenta
5. Click en "Conectar"
6. Ver direcci√≥n y balance en la UI


PASO 3: CONFIGURAR CONTRATO
----------------------------
1. Click en "üîÑ Load Latest"
2. Se carga autom√°ticamente la direcci√≥n del √∫ltimo despliegue
3. Ver informaci√≥n del fondo:
   - Nombre del viaje
   - Balance total
   - N√∫mero de contribuyentes
   - % de aprobaci√≥n requerido


PASO 4: DEPOSITAR FONDOS
-------------------------
1. Ir a la tab "Deposit"
2. Ingresar cantidad (ej: 2.5)
3. Click en "Deposit Funds"
4. MetaMask muestra popup con detalles:
   - To: direcci√≥n del contrato
   - Amount: 2.5 ETH
   - Gas fee: ~0.001 ETH
5. Click en "Confirmar"
6. Esperar confirmaci√≥n
7. Ver actualizaci√≥n en "Total Balance"


PASO 5: CREAR PROPUESTA
------------------------
1. Ir a la tab "Create Proposal"
2. Completar formulario:
   - Description: "Hotel en Canc√∫n - 3 noches"
   - Amount: 4
   - Recipient: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
3. Click en "Create Proposal"
4. Confirmar en MetaMask
5. Ver nueva propuesta en la lista


PASO 6: VOTAR
--------------
1. Ir a la tab "Vote"
2. Ver lista de propuestas
3. Cada propuesta muestra:
   - Descripci√≥n
   - Monto
   - Votos a favor / en contra
   - Botones "Vote For" y "Vote Against"
4. Click en "Vote For"
5. Confirmar en MetaMask
6. Ver contador de votos actualizado


PASO 7: EJECUTAR PROPUESTA
---------------------------
1. Cuando hay suficientes votos:
   - Badge cambia a "Approved"
   - Aparece bot√≥n "Execute"
2. Click en "Execute"
3. Confirmar en MetaMask
4. El destinatario recibe los fondos
5. Badge cambia a "Executed"
6. Balance total se reduce


PASO 8: CERRAR FONDO (Opcional)
--------------------------------
1. Solo el creador puede hacer esto
2. Ir a la tab "Manage"
3. Click en "Close Fund"
4. Confirmar en MetaMask
5. Estado cambia a "Closed"
6. Ya no se pueden hacer dep√≥sitos ni propuestas


PASO 9: RETIRAR FONDOS (Despu√©s de cerrar)
-------------------------------------------
1. Ir a la tab "Manage"
2. Ver tu contribuci√≥n y tu parte proporcional
3. Click en "Withdraw My Share"
4. Confirmar en MetaMask
5. Recibes tu parte en tu wallet

================================================================================
9. EJEMPLOS PR√ÅCTICOS
================================================================================

EJEMPLO 1: VIAJE A CANC√öN CON 4 AMIGOS
---------------------------------------

SETUP:
- 4 amigos: Alice, Bob, Charlie, Diana
- Configuraci√≥n: 60% aprobaci√≥n, m√≠nimo 2 votos
- Cada uno deposita:
  * Alice: 3 ETH
  * Bob: 2.5 ETH
  * Charlie: 2 ETH
  * Diana: 1.5 ETH
- Total: 9 ETH

PROPUESTA 1: Hotel (4 ETH)
- Bob crea la propuesta
- Votos:
  * Alice: A favor ‚úì
  * Bob: A favor ‚úì
  * Charlie: A favor ‚úì
  * Diana: En contra ‚úó
- Resultado: 3/4 = 75% > 60% ‚Üí APROBADA
- Charlie ejecuta la propuesta
- Hotel recibe 4 ETH
- Balance restante: 5 ETH

PROPUESTA 2: Tours (3 ETH)
- Diana crea la propuesta
- Votos:
  * Alice: A favor ‚úì
  * Bob: En contra ‚úó
  * Charlie: No vota
  * Diana: A favor ‚úì
- Resultado: 2/4 = 50% < 60% ‚Üí RECHAZADA
- Nadie puede ejecutarla

PROPUESTA 3: Comida (1 ETH)
- Alice crea la propuesta
- Votos:
  * Alice: A favor ‚úì
  * Bob: A favor ‚úì
  * Charlie: A favor ‚úì
  * Diana: A favor ‚úì
- Resultado: 4/4 = 100% > 60% ‚Üí APROBADA
- Balance final: 4 ETH

CERRAR FONDO:
- Alice (creadora) cierra el fondo
- Distribuci√≥n proporcional:
  * Alice: 3/9 * 4 = 1.33 ETH
  * Bob: 2.5/9 * 4 = 1.11 ETH
  * Charlie: 2/9 * 4 = 0.89 ETH
  * Diana: 1.5/9 * 4 = 0.67 ETH


EJEMPLO 2: USANDO LA CONSOLA DE HARDHAT
----------------------------------------

// 1. Abrir consola
npx hardhat console --network localhost

// 2. Obtener signers (cuentas)
const [alice, bob, charlie] = await ethers.getSigners();

// 3. Conectar con el contrato
const TravelFund = await ethers.getContractFactory("TravelFund");
const fund = TravelFund.attach("0x5FbDB2315678afecb367f032d93F642f64180aa3");

// 4. Hacer dep√≥sitos
await fund.connect(alice).deposit({ value: ethers.parseEther("3") });
await fund.connect(bob).deposit({ value: ethers.parseEther("2") });

// 5. Ver balance
const balance = await fund.getBalance();
console.log("Balance:", ethers.formatEther(balance), "ETH");

// 6. Crear propuesta
const tx = await fund.connect(alice).createProposal(
    "Hotel", 
    ethers.parseEther("2"),
    bob.address
);
await tx.wait();

// 7. Votar
await fund.connect(alice).vote(1, true);
await fund.connect(bob).vote(1, true);

// 8. Ver propuesta
const proposal = await fund.getProposal(1);
console.log("Votos a favor:", proposal.votesFor.toString());

// 9. Ejecutar
await fund.connect(alice).executeProposal(1);

// 10. Verificar balance de Bob
const bobBalance = await ethers.provider.getBalance(bob.address);
console.log("Bob tiene:", ethers.formatEther(bobBalance), "ETH");


EJEMPLO 3: ESCUCHAR EVENTOS EN TIEMPO REAL
-------------------------------------------

// Configurar listeners
contract.on("Deposit", (contributor, amount) => {
    console.log(`üí∞ ${contributor} deposit√≥ ${ethers.formatEther(amount)} ETH`);
    updateUI();
});

contract.on("ProposalCreated", (proposalId, description) => {
    console.log(`üìù Nueva propuesta #${proposalId}: ${description}`);
    loadProposals();
});

contract.on("Voted", (proposalId, voter, inFavor) => {
    const vote = inFavor ? "a favor" : "en contra";
    console.log(`üó≥Ô∏è ${voter} vot√≥ ${vote} en propuesta #${proposalId}`);
    loadProposals();
});

contract.on("ProposalExecuted", (proposalId, amount) => {
    console.log(`‚úÖ Propuesta #${proposalId} ejecutada: ${ethers.formatEther(amount)} ETH`);
    updateUI();
    loadProposals();
});

// Ahora cada evento actualiza la UI autom√°ticamente

================================================================================
10. SOLUCI√ìN DE PROBLEMAS COMUNES
================================================================================

PROBLEMA 1: "MetaMask no detectado"
------------------------------------
CAUSAS:
- MetaMask no instalado
- Extensi√≥n deshabilitada
- P√°gina no cargada completamente

SOLUCIONES:
1. Verificar que MetaMask est√© instalado
2. Recargar la p√°gina
3. Revisar la consola del navegador (F12)
4. Probar con window.ethereum en la consola:
   console.log(window.ethereum)  // Debe existir


PROBLEMA 2: "Wrong network"
----------------------------
CAUSAS:
- MetaMask conectado a red incorrecta (Mainnet, Sepolia, etc.)

SOLUCIONES:
1. Abrir MetaMask
2. Click en selector de red (arriba)
3. Seleccionar "Hardhat Local"
4. Si no aparece, agregarla manualmente:
   - RPC: http://127.0.0.1:8545
   - Chain ID: 31337


PROBLEMA 3: "Contract not found"
---------------------------------
CAUSAS:
- Nodo Hardhat reiniciado (pierde el estado)
- Direcci√≥n de contrato incorrecta

SOLUCIONES:
1. Redesplegar el contrato:
   npx hardhat run scripts/deployTravelFund.js --network localhost
2. Click en "üîÑ Load Latest" en la UI
3. O copiar/pegar la nueva direcci√≥n manualmente


PROBLEMA 4: "Insufficient funds"
---------------------------------
CAUSAS:
- La cuenta no tiene suficiente ETH
- Intentando gastar m√°s de lo disponible

SOLUCIONES:
1. Verificar balance en MetaMask
2. Usar otra cuenta de prueba de Hardhat
3. Reiniciar nodo para resetear balances:
   Ctrl+C (detener nodo)
   npx hardhat node (iniciar de nuevo)


PROBLEMA 5: "Transaction failed"
---------------------------------
CAUSAS:
- Validaci√≥n fallida en el smart contract
- Gas insuficiente
- Nonce incorrecto

SOLUCIONES:
1. Leer el mensaje de error en MetaMask
2. Verificar que cumples los requisitos:
   - ¬øEres contribuyente?
   - ¬øEl fondo est√° activo?
   - ¬øYa votaste en esta propuesta?
3. Revisar logs del nodo Hardhat
4. Si el error persiste:
   - Reiniciar MetaMask
   - Limpiar cach√© del navegador
   - Reiniciar el nodo


PROBLEMA 6: "Nonce too high"
-----------------------------
CAUSAS:
- MetaMask desincronizado con la blockchain local
- Reiniciaste el nodo pero no MetaMask

SOLUCIONES:
1. Abrir MetaMask
2. Configuraci√≥n ‚Üí Avanzado
3. Scroll hasta "Restablecer cuenta"
4. Click en "Restablecer"
5. Intentar la transacci√≥n de nuevo


PROBLEMA 7: UI no se actualiza
-------------------------------
CAUSAS:
- Eventos no escuchados correctamente
- Error en JavaScript
- Cach√© del navegador

SOLUCIONES:
1. Abrir consola del navegador (F12)
2. Buscar errores en rojo
3. Recargar la p√°gina (Ctrl+Shift+R)
4. Verificar que el contrato est√© cargado:
   console.log(contract)  // No debe ser undefined


PROBLEMA 8: Video de fondo no carga
------------------------------------
CAUSAS:
- Conexi√≥n a internet lenta
- URL del video bloqueada

SOLUCIONES:
1. Esperar a que cargue
2. Revisar consola por errores de CORS
3. Descargar video localmente:
   - Guardar en frontend/assets/background.mp4
   - Actualizar src en index.html:
     <source src="assets/background.mp4" type="video/mp4">


PROBLEMA 9: CSS no se aplica
-----------------------------
CAUSAS:
- Archivo CSS no encontrado
- Cach√© del navegador

SOLUCIONES:
1. Verificar que frontend/styles.css existe
2. Limpiar cach√©: Ctrl+Shift+R
3. Revisar consola del navegador por errores 404
4. Verificar que el servidor est√© corriendo


PROBLEMA 10: "Gas estimation failed"
-------------------------------------
CAUSAS:
- La transacci√≥n va a fallar
- Validaci√≥n del smart contract no se cumple

SOLUCIONES:
1. Leer el mensaje de error completo
2. Ejemplos comunes:
   - "Fondo cerrado" ‚Üí No puedes hacer esa operaci√≥n
   - "Solo el creador" ‚Üí No tienes permiso
   - "Ya votaste" ‚Üí No puedes votar dos veces
3. Verificar el estado del contrato en la UI
4. Intentar otra operaci√≥n v√°lida

================================================================================
COMANDOS √öTILES DE REFERENCIA R√ÅPIDA
================================================================================

INSTALACI√ìN:
    npm install                  ‚Üí Instalar dependencias

COMPILACI√ìN:
    npx hardhat compile          ‚Üí Compilar contratos

TESTING:
    npx hardhat test             ‚Üí Ejecutar todos los tests
    npx hardhat test --grep "deposit"  ‚Üí Ejecutar tests espec√≠ficos

NODO LOCAL:
    npx hardhat node             ‚Üí Iniciar blockchain local
    Ctrl+C                       ‚Üí Detener nodo

DESPLIEGUE:
    npx hardhat run scripts/deployTravelFund.js --network localhost

CONSOLA:
    npx hardhat console --network localhost
    const [owner] = await ethers.getSigners();
    const balance = await ethers.provider.getBalance(owner.address);

FRONTEND:
    npm run frontend             ‚Üí Iniciar servidor (http://localhost:3001)
    Ctrl+C                       ‚Üí Detener servidor

SCRIPT TODO-EN-UNO:
    .\start-simple.ps1           ‚Üí Inicia todo (Windows PowerShell)
    bash start-dev.sh            ‚Üí Inicia todo (Linux/Mac)

LIMPIAR:
    npx hardhat clean            ‚Üí Elimina artifacts y cache
    rm -rf node_modules          ‚Üí Elimina dependencias
    npm install                  ‚Üí Reinstala

================================================================================
RECURSOS ADICIONALES
================================================================================

DOCUMENTACI√ìN OFICIAL:
- Solidity: https://docs.soliditylang.org/
- Hardhat: https://hardhat.org/docs
- Ethers.js: https://docs.ethers.org/v6/
- MetaMask: https://docs.metamask.io/

TUTORIALES:
- CryptoZombies: https://cryptozombies.io/ (Aprende Solidity jugando)
- Ethereum.org: https://ethereum.org/en/developers/tutorials/

COMUNIDAD:
- Ethereum Stack Exchange: https://ethereum.stackexchange.com/
- Hardhat Discord: https://hardhat.org/discord
- Reddit: r/ethdev

HERRAMIENTAS:
- Remix IDE: https://remix.ethereum.org/ (IDE online para Solidity)
- Etherscan: https://etherscan.io/ (Explorador de blockchain)
- OpenZeppelin: https://www.openzeppelin.com/contracts (Contratos auditados)

================================================================================
FIN DE LA GU√çA
================================================================================

¬°Felicidades por llegar hasta aqu√≠! Ahora tienes un entendimiento profundo de:
‚úì C√≥mo funcionan los smart contracts
‚úì C√≥mo interactuar con la blockchain
‚úì C√≥mo construir DApps completas
‚úì C√≥mo usar Hardhat, Solidity, Ethers.js y MetaMask

PR√ìXIMOS PASOS SUGERIDOS:
1. Experimenta modificando el contrato
2. Agrega nuevas funcionalidades
3. Crea tus propios smart contracts
4. Explora contratos m√°s avanzados (ERC20, ERC721, etc.)
5. Despliega en una testnet p√∫blica (Sepolia, Goerli)

¬°Mucha suerte en tu viaje en el desarrollo blockchain! üöÄ
